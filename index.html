<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>별미 Byeolmi — 十味</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { margin:0; font-family:sans-serif; background:#f5f5f5; display:flex; justify-content:center; }

    .app-wrapper {
      width:100%;
      max-width:700px;
      min-height:100vh;
      margin:0 auto;
      background:#fff;
      position:relative;
      display:flex;
      flex-direction:column;
    }

    /* 헤더 */
    header { padding:10px 16px; display:flex; align-items:center; gap:10px; background:#fff; border-bottom:1px solid #eee; }
    header img { height:32px; }

    /* 소개 문구 */
    .intro { padding:16px; background:#fff; border-bottom:1px solid #eee; }
    .intro h1 { margin:0 0 8px; font-size:18px; font-weight:bold; }
    .intro p { margin:4px 0; color:#555; font-size:14px; }

    /* 지역 탭 UI */
    .region { padding:16px 16px 0; background:#fff; margin-top:10px; }
    .region h2 { margin:0 0 12px; font-size:16px; }
    .tabs { display:flex; flex-wrap:wrap; border-bottom:1px solid #ddd; }
    .tabs a {
      padding:10px 14px;
      font-size:14px;
      color:#666;
      text-decoration:none;
      border-bottom:3px solid transparent;
      transition:all 0.2s ease;
    }
    .tabs a:hover { color:#000; }
    .tabs a.active {
      color:#000;
      font-weight:bold;
      border-color:#1E88E5;
    }

    /* 리스트 */
    .cards { display:grid; grid-template-columns:repeat(auto-fill, minmax(160px,1fr)); gap:12px; padding:16px; }
    .card { background:#fff; border:1px solid #eee; border-radius:10px; overflow:hidden; transition:transform .1s; display:flex; flex-direction:column; justify-content:space-between; }
    .card:hover { transform:translateY(-2px); }

    /* 이미지 박스 */
    .card .image-box {
      width: 100%;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
    }
    .card .image-box img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block;
    }

    /* 카드 메타정보 */
    .card .meta { padding:8px; font-size:14px; }
    .card .name { font-weight:bold; margin-bottom:4px; }

    /* 링크 버튼 */
    .links { display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
    .links a { flex:1; text-align:center; padding:6px 4px; border:1px solid #ddd; border-radius:6px; background:#fafafa; display:flex; align-items:center; justify-content:center; }
    .links a:hover { background:#f0f0f0; }
    .links svg { width:28px; height:28px; }

    /* 푸터 */
    footer {
      background:#f9f9f9;
      border-top:1px solid #eee;
      padding:12px;
      text-align:center;
      font-size:13px;
      color:#666;
      margin-top:auto;
    }
    footer p {
      margin:4px 0;
      line-height:1.4;
    }
    footer nav {
      margin:4px 0;
    }
    footer nav a {
      color:#666;
      text-decoration:none;
      margin:0 6px;
    }
    footer nav a:hover {
      color:#000;
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <!-- 헤더 -->
    <header>
      <img src="img/main.png" alt="별미 Byeolmi 로고">
    </header>

    <!-- 소개 문구 -->
    <div class="intro" style="background:#fdf6ec; border:1px solid #f0e0c0; border-radius:8px; padding:16px; text-align:center;">
      <p style="margin:0; font-size:14px; color:#333;">
        <strong>별미 10미</strong>는 전국에서 엄선한 맛집 리스트입니다.<br>
        이 외에도 업체 선정을 원하시면 
        <a href="privacy.html" style="color:#d35400; font-weight:bold;">별미와 연락하기</a> 로 문의하세요.
      </p>
    </div>

    <!-- 지역 선택 (탭 UI) -->
    <div class="region">
      <h2>지역별 별미</h2>
      <div class="tabs">
        <a href="#/region/gangnam" data-region="gangnam" class="active">강남十味</a>
        <a href="#/region/cheongdam" data-region="cheongdam">청담十味</a>
        <a href="#/region/apgujeong" data-region="apgujeong">압구정十味</a>
        <a href="#/region/nonhyeon" data-region="nonhyeon">논현十味</a>
        <a href="#/region/seongsu" data-region="seongsu">성수十味</a>
        <a href="#/region/euljiro" data-region="euljiro">을지로十味</a>
        <a href="#/region/daegu" data-region="daegu">대구十味</a>
        <a href="#/region/busan" data-region="busan">부산十味</a>
      </div>
    </div>

    <!-- 리스트 -->
    <div class="cards" id="restaurantCards"></div>

    <!-- 푸터 -->
    <footer>
      <p>© 2025 별미 Byeolmi — 전국의 별미를 찾아 떠나는 여행</p>
      <nav>
         <a href="about.html">About</a> | 
         <a href="terms.html">이용약관</a> | 
         <a href="privacy.html">개인정보처리방침</a>
      </nav>
    </footer>
  </div>

  <script>
  const regionFiles = {
    gangnam: "data/restaurants_gangnam.json",
    daegu: "data/restaurants_daegu.json",
    busan: "data/restaurants_busan.json",
    cheongdam: "data/restaurants_cheongdam.json",
    apgujeong: "data/restaurants_apgujeong.json",
    nonhyeon: "data/restaurants_nonhyeon.json",
    seongsu: "data/restaurants_seongsu.json",
    euljiro: "data/restaurants_euljiro.json"
  };

  async function loadRestaurants(region = "gangnam") {
    try {
      const res = await fetch(regionFiles[region]);
      if (!res.ok) throw new Error("데이터 없음");

      const data = await res.json();
      const container = document.getElementById("restaurantCards");
      container.innerHTML = "";

      data.forEach(r => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="image-box">
            <img src="${r.image}" alt="${r.name}" onerror="this.src='img/byeolmi.png'">
          </div>
          <div class="meta">
            <div class="name">${r.name}</div>
            <div>메뉴: ${r.menu}</div>
            <div class="links">
              <a href="${r.map}" target="_blank" title="위치">
                <svg viewBox="0 0 24 24"><path fill="#1E88E5" d="M12 2C7.58 2 4 5.58 4 10c0 5.25 8 12 8 12s8-6.75 8-12c0-4.42-3.58-8-8-8z"/><circle cx="12" cy="10" r="3" fill="#fff"/></svg>
              </a>
              <a href="${r.blog}" target="_blank" title="블로그">
                <svg viewBox="0 0 24 24">
                  <rect width="24" height="24" rx="4" fill="#03C75A"/>
                  <text x="50%" y="50%" text-anchor="middle" dy=".35em" 
                        font-size="16" font-weight="900" fill="#fff">N</text>
                </svg>
              </a>
              <a href="${r.youtube}" target="_blank" title="유튜브">
                <svg viewBox="0 0 24 24">
                  <rect x="2" y="4" width="20" height="16" rx="3" fill="#FF0000"/>
                  <polygon points="10,7 17,12 10,17" fill="#fff"/>
                </svg>
              </a>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    } catch (err) {
      const container = document.getElementById("restaurantCards");
      container.innerHTML = `<p style="padding:16px; color:#999;">데이터를 불러올 수 없습니다.</p>`;
      console.error("데이터 불러오기 실패:", err);
    }
  }

  function getRegionFromHash() {
    const hash = window.location.hash; // #/region/gangnam
    const parts = hash.split("/");
    return parts[2] || "gangnam";
  }

  function navigate(region) {
    if (regionFiles[region]) {
      window.location.hash = `/region/${region}`;
      loadRestaurants(region);
      setActiveTab(region);
    }
  }

  function setActiveTab(region) {
    document.querySelectorAll(".tabs a").forEach(tab => {
      tab.classList.toggle("active", tab.dataset.region === region);
    });
  }

  window.addEventListener("DOMContentLoaded", () => {
    const region = getRegionFromHash();
    loadRestaurants(region);
    setActiveTab(region);

    document.querySelectorAll(".tabs a").forEach(tab => {
      tab.addEventListener("click", e => {
        e.preventDefault();
        const region = tab.dataset.region;
        navigate(region);
      });
    });
  });

  window.addEventListener("hashchange", () => {
    const region = getRegionFromHash();
    loadRestaurants(region);
    setActiveTab(region);
  });
  </script>
</body>
</html>
